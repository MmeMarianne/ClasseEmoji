<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClasseEmojis</title>
    <style>
        :root {
            --primary: #4e73df;
            --success: #1cc88a;
            --danger: #e74a3b;
            --warning: #f6c23e;
            --light: #f8f9fc;
            --dark: #5a5c69;
            --selected: #e8f4ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        /* Navigation par onglets */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            flex: 1;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .tab.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Contr√¥les */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .global-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .select-all-btn {
            background-color: var(--primary);
            color: white;
        }
        
        .deselect-all-btn {
            background-color: #6c757d;
            color: white;
        }
        
        .add-points-btn {
            background-color: var(--success);
            color: white;
        }
        
        .remove-points-btn {
            background-color: var(--danger);
            color: white;
        }
        
        .reset-btn {
            background-color: var(--warning);
            color: white;
        }
        
        .change-avatar-btn {
            background-color: #6f42c1;
            color: white;
        }
        
        .save-btn {
            background-color: var(--success);
            color: white;
        }
        
        /* Grille d'√©l√®ves */
        .student-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
        }
        
        .student-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s;
            position: relative;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .student-card.selected {
            background-color: var(--selected);
            border: 2px solid var(--primary);
        }
        
        .student-checkbox {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            z-index: 2;
        }
        
        .student-avatar {
            margin: 5px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 70px;
        }
        
        .avatar-img {
            font-size: 4rem;
            line-height: 1;
        }
        
        .student-name {
            font-size: 0.9rem;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .student-id {
            font-size: 0.8rem;
            color: #6c757d;
            margin-bottom: 5px;
        }
        
        .points {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        .summary {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        /* Formulaire de gestion des √©l√®ves */
        .student-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .student-list {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .student-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .student-item:last-child {
            border-bottom: none;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .modal p {
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        
        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .confirm-btn {
            background-color: var(--danger);
            color: white;
            padding: 10px 20px;
        }
        
        .cancel-btn {
            background-color: #6c757d;
            color: white;
            padding: 10px 20px;
        }
        
        /* Popup de points */
        .points-popup {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .points-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .point-btn {
            padding: 10px;
            font-size: 1.2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .positive-btn {
            background-color: var(--success);
            color: white;
        }
        
        .negative-btn {
            background-color: var(--danger);
            color: white;
        }
        
        /* Grille d'avatars */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .avatar-option {
            width: 80px;
            height: 80px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background-color: #f8f9fc;
        }
        
        .avatar-option:hover {
            transform: scale(1.1);
            background-color: #e9ecef;
        }
        
        .avatar-option.selected {
            background-color: var(--selected);
            transform: scale(1.1);
            border: 2px solid var(--primary);
        }
        
        .avatar-option-emoji {
            font-size: 3.5rem;
        }
        
        @media (max-width: 1200px) {
            .student-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .avatar-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .student-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .avatar-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .global-actions {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .avatar-option {
                width: 70px;
                height: 70px;
            }
            
            .avatar-option-emoji {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 480px) {
            .student-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .avatar-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .student-card {
                height: 190px;
            }
            
            .avatar-img {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ClasseEmojis - Groupe 401</h1>
    </header>
        
        <!-- Navigation par onglets -->
        <div class="tabs">
            <div class="tab active" data-tab="student-view">Vue √âl√®ves</div>
            <div class="tab" data-tab="teacher-view">Vue Enseignant</div>
        </div>
        
        <!-- Vue √âl√®ves -->
        <div class="tab-content active" id="student-view">
            <div class="controls">
                <div class="selection-controls">
                    <button class="select-all-btn" id="selectAllBtn">S√©lectionner tous</button>
                    <button class="deselect-all-btn" id="deselectAllBtn">D√©s√©lectionner tous</button>
                </div>
                <div class="global-actions">
                    <button class="add-points-btn" id="addPointsBtn">Ajouter points</button>
                    <button class="remove-points-btn" id="removePointsBtn">Retirer points</button>
                    <button class="reset-btn" id="resetBtn">R√©initialiser points</button>
                    <button class="change-avatar-btn" id="changeAvatarBtn">Changer avatar</button>
                </div>
            </div>
            
            <div class="student-grid" id="studentGrid">
                <!-- Les cartes des √©l√®ves seront g√©n√©r√©es ici -->
            </div>
            
            <div class="summary">
                <h3>R√©sum√© de la classe</h3>
                <p>Total des points verts: <span id="totalGreen">0</span> | Total des points rouges: <span id="totalRed">0</span></p>
            </div>
        </div>
        
        <!-- Vue Enseignant -->
        <div class="tab-content" id="teacher-view">
            <div class="student-form">
                <h2>G√©rer les √©l√®ves</h2>
                <div class="form-group">
                    <label for="studentId">Num√©ro de classe</label>
                    <input type="number" id="studentId" min="1" max="99" placeholder="Num√©ro">
                </div>
                <div class="form-group">
                    <label for="studentName">Pr√©nom de l'√©l√®ve</label>
                    <input type="text" id="studentName" placeholder="Pr√©nom">
                </div>
                <button class="save-btn" id="addStudentBtn">Ajouter l'√©l√®ve</button>
            </div>
            
            <div class="student-list" id="studentList">
                <h2>Liste des √©l√®ves</h2>
                <!-- La liste des √©l√®ves sera g√©n√©r√©e ici -->
            </div>
        </div>
    </div>

    <!-- Modal de confirmation pour la r√©initialisation -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h2>Confirmation de r√©initialisation</h2>
            <p>√ätes-vous s√ªr de vouloir r√©initialiser tous les points √† z√©ro ?</p>
            <p>Cette action est irr√©versible.</p>
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelReset">Annuler</button>
                <button class="confirm-btn" id="confirmReset">Tout r√©initialiser</button>
            </div>
        </div>
    </div>

    <!-- Modal de s√©lection d'avatar -->
    <div class="modal" id="avatarModal">
        <div class="modal-content">
            <h2>Choisir un avatar</h2>
            <p>S√©lectionnez un √©l√®ve puis choisissez un avatar parmi les options ci-dessous</p>
            
            <div class="avatar-grid" id="avatarGrid">
                <!-- Les options d'avatar seront g√©n√©r√©es ici -->
            </div>
            
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelAvatar">Annuler</button>
                <button class="confirm-btn" id="confirmAvatar">Appliquer l'avatar</button>
            </div>
        </div>
    </div>

    <!-- Popup pour AJOUTER des points -->
    <div class="modal" id="addPointsModal">
        <div class="modal-content">
            <h2>Ajouter des points</h2>
            <p id="addPointsModalText">S√©lectionnez le nombre de points √† ajouter</p>
            
            <div class="points-popup">
                <div class="points-buttons">
                    <button class="point-btn positive-btn" data-points="1">+1</button>
                    <button class="point-btn positive-btn" data-points="2">+2</button>
                    <button class="point-btn positive-btn" data-points="3">+3</button>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelAddPoints">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Popup pour RETIRER des points -->
    <div class="modal" id="removePointsModal">
        <div class="modal-content">
            <h2>Retirer des points</h2>
            <p id="removePointsModalText">S√©lectionnez le nombre de points √† retirer</p>
            
            <div class="points-popup">
                <div class="points-buttons">
                    <button class="point-btn negative-btn" data-points="-1">-1</button>
                    <button class="point-btn negative-btn" data-points="-2">-2</button>
                    <button class="point-btn negative-btn" data-points="-3">-3</button>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelRemovePoints">Annuler</button>
            </div>
        </div>
    </div>

    <script>
        // Liste de 50 avatars pour enfants de 10 ans
        const avatars = [
            "üê∂", "üê±", "üê≠", "üêπ", "üê∞", "ü¶ä", "üêª", "üêº", "üê®", "üêØ",
            "ü¶Å", "üêÆ", "üê∑", "üê∏", "üêô", "üêµ", "ü¶Ñ", "üê¢", "üê¨", "üê≥",
            "ü¶ñ", "üê†", "üêå", "ü¶â", "üêß", "ü¶ú", "üêò", "ü¶í", "ü¶è", "üê™",
            "ü¶©", "ü¶ò", "üêøÔ∏è", "ü¶î", "ü¶á", "ü¶•", "ü¶¶", "ü¶®", "ü¶ö", "ü¶É",
            "üê≤", "üåû", "‚≠ê", "üåà", "üå∫", "üçï", "üç¶", "üöÄ", "üéÆ", "üé∏"
        ];

        // Donn√©es des √©l√®ves (24 √©l√®ves comme demand√©)
        let students = [
            { id: 1, name: "L√©a", points: 12, avatar: "üê∂" },
            { id: 2, name: "Hugo", points: 8, avatar: "üê±" },
            { id: 3, name: "Emma", points: 15, avatar: "üê≠" },
            { id: 4, name: "Lucas", points: 5, avatar: "üêπ" },
            { id: 5, name: "Chlo√©", points: 10, avatar: "üê∞" },
            { id: 6, name: "Thomas", points: 7, avatar: "ü¶ä" },
            { id: 7, name: "Zo√©", points: 9, avatar: "üêª" },
            { id: 8, name: "Nathan", points: 11, avatar: "üêº" },
            { id: 9, name: "Manon", points: 6, avatar: "üê®" },
            { id: 10, name: "Mathieu", points: 14, avatar: "üêØ" },
            { id: 11, name: "In√®s", points: 8, avatar: "ü¶Å" },
            { id: 12, name: "Louis", points: 13, avatar: "üêÆ" },
            { id: 13, name: "Julie", points: 4, avatar: "üê∑" },
            { id: 14, name: "Enzo", points: 10, avatar: "üê∏" },
            { id: 15, name: "L√©a P.", points: 7, avatar: "üêô" },
            { id: 16, name: "Rapha√´l", points: 9, avatar: "üêµ" },
            { id: 17, name: "Sarah", points: 11, avatar: "ü¶Ñ" },
            { id: 18, name: "Maxime", points: 6, avatar: "üê¢" },
            { id: 19, name: "Clara", points: 12, avatar: "üê¨" },
            { id: 20, name: "Alexandre", points: 8, avatar: "üê≥" },
            { id: 21, name: "Camille", points: 10, avatar: "ü¶ñ" },
            { id: 22, name: "Quentin", points: 5, avatar: "üê†" },
            { id: 23, name: "Lilou", points: 9, avatar: "üêå" },
            { id: 24, name: "No√©", points: 13, avatar: "ü¶â" }
        ];

        // √âl√©ments DOM
        const studentGrid = document.getElementById('studentGrid');
        const studentList = document.getElementById('studentList');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const deselectAllBtn = document.getElementById('deselectAllBtn');
        const addPointsBtn = document.getElementById('addPointsBtn');
        const removePointsBtn = document.getElementById('removePointsBtn');
        const resetBtn = document.getElementById('resetBtn');
        const changeAvatarBtn = document.getElementById('changeAvatarBtn');
        const totalGreenSpan = document.getElementById('totalGreen');
        const totalRedSpan = document.getElementById('totalRed');
        const resetModal = document.getElementById('resetModal');
        const cancelReset = document.getElementById('cancelReset');
        const confirmReset = document.getElementById('confirmReset');
        const avatarModal = document.getElementById('avatarModal');
        const avatarGrid = document.getElementById('avatarGrid');
        const cancelAvatar = document.getElementById('cancelAvatar');
        const confirmAvatar = document.getElementById('confirmAvatar');
        const addPointsModal = document.getElementById('addPointsModal');
        const cancelAddPoints = document.getElementById('cancelAddPoints');
        const addPointsModalText = document.getElementById('addPointsModalText');
        const removePointsModal = document.getElementById('removePointsModal');
        const cancelRemovePoints = document.getElementById('cancelRemovePoints');
        const removePointsModalText = document.getElementById('removePointsModalText');
        const studentIdInput = document.getElementById('studentId');
        const studentNameInput = document.getElementById('studentName');
        const addStudentBtn = document.getElementById('addStudentBtn');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Variables pour la gestion des avatars et points
        let selectedAvatar = null;
        let selectedStudentId = null;
        let pointsTargetStudents = [];

        // Afficher les √©l√®ves dans la grille
        function displayStudents() {
            studentGrid.innerHTML = '';
            
            students.forEach(student => {
                const studentCard = document.createElement('div');
                studentCard.className = 'student-card';
                studentCard.dataset.id = student.id;
                
                studentCard.innerHTML = `
                    <input type="checkbox" class="student-checkbox" id="student-${student.id}">
                    <div class="student-avatar">
                        <div class="avatar-img">${student.avatar}</div>
                    </div>
                    <div class="student-id">#${student.id}</div>
                    <div class="student-name">${student.name}</div>
                    <div class="points ${student.points >= 0 ? 'positive' : 'negative'}">${student.points}</div>
                `;
                
                studentGrid.appendChild(studentCard);
                
                // Ajouter l'√©couteur d'√©v√©nement pour la s√©lection
                const checkbox = studentCard.querySelector('.student-checkbox');
                checkbox.addEventListener('change', function() {
                    studentCard.classList.toggle('selected', this.checked);
                });
                
                // Ajouter l'√©couteur pour la s√©lection (uniquement sur la carte, pas la checkbox)
                studentCard.addEventListener('click', function(e) {
                    if (e.target !== checkbox) {
                        checkbox.checked = !checkbox.checked;
                        studentCard.classList.toggle('selected', checkbox.checked);
                    }
                });
            });
            
            updateSummary();
        }

        // Afficher la liste des √©l√®ves pour l'enseignant
        function displayStudentList() {
            studentList.innerHTML = '<h2>Liste des √©l√®ves</h2>';
            
            if (students.length === 0) {
                studentList.innerHTML += '<p>Aucun √©l√®ve enregistr√©.</p>';
                return;
            }
            
            students.forEach(student => {
                const studentItem = document.createElement('div');
                studentItem.className = 'student-item';
                studentItem.innerHTML = `
                    <div>#${student.id} - ${student.name}</div>
                    <button class="remove-btn" data-id="${student.id}">Supprimer</button>
                `;
                
                studentList.appendChild(studentItem);
            });
            
            // Ajouter les √©couteurs pour les boutons de suppression
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    deleteStudent(id);
                });
            });
        }

        // Supprimer un √©l√®ve
        function deleteStudent(id) {
            if (confirm(`√ätes-vous s√ªr de vouloir supprimer l'√©l√®ve #${id} ?`)) {
                students = students.filter(student => student.id !== id);
                displayStudents();
                displayStudentList();
            }
        }

        // Ajouter un nouvel √©l√®ve
        function addStudent() {
            const id = parseInt(studentIdInput.value);
            const name = studentNameInput.value.trim();
            
            if (!id || id < 1) {
                alert("Veuillez entrer un num√©ro de classe valide.");
                return;
            }
            
            if (!name) {
                alert("Veuillez entrer un pr√©nom.");
                return;
            }
            
            // V√©rifier si le num√©ro est d√©j√† utilis√©
            if (students.some(student => student.id === id)) {
                alert(`Le num√©ro #${id} est d√©j√† utilis√©.`);
                return;
            }
            
            // Choisir un avatar al√©atoire
            const randomAvatar = avatars[Math.floor(Math.random() * avatars.length)];
            
            // Ajouter le nouvel √©l√®ve
            students.push({
                id: id,
                name: name,
                points: 0,
                avatar: randomAvatar
            });
            
            // Trier les √©l√®ves par num√©ro
            students.sort((a, b) => a.id - b.id);
            
            // Mettre √† jour l'affichage
            displayStudents();
            displayStudentList();
            
            // R√©initialiser le formulaire
            studentIdInput.value = '';
            studentNameInput.value = '';
            
            alert(`√âl√®ve ${name} (#${id}) ajout√© avec succ√®s !`);
        }

        // Afficher les options d'avatar
        function displayAvatarOptions() {
            avatarGrid.innerHTML = '';
            
            avatars.forEach((avatar, index) => {
                const avatarOption = document.createElement('div');
                avatarOption.className = 'avatar-option';
                avatarOption.innerHTML = `<div class="avatar-option-emoji">${avatar}</div>`;
                avatarOption.dataset.avatar = avatar;
                
                avatarOption.addEventListener('click', function() {
                    // D√©s√©lectionner tous les avatars
                    document.querySelectorAll('.avatar-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // S√©lectionner cet avatar
                    this.classList.add('selected');
                    selectedAvatar = avatar;
                });
                
                avatarGrid.appendChild(avatarOption);
            });
        }

        // Mettre √† jour le r√©sum√© des points
        function updateSummary() {
            let totalGreen = 0;
            let totalRed = 0;
            
            students.forEach(student => {
                if (student.points >= 0) {
                    totalGreen += student.points;
                } else {
                    totalRed += Math.abs(student.points);
                }
            });
            
            totalGreenSpan.textContent = totalGreen;
            totalRedSpan.textContent = totalRed;
        }

        // Ouvrir le popup pour AJOUTER des points
        function openAddPointsModal(studentIds) {
            pointsTargetStudents = studentIds;
            
            if (studentIds.length === 1) {
                const student = students.find(s => s.id === studentIds[0]);
                addPointsModalText.textContent = `Ajouter des points √† ${student.name} (#${student.id})`;
            } else {
                addPointsModalText.textContent = `Ajouter des points √† ${studentIds.length} √©l√®ves s√©lectionn√©s`;
            }
            
            addPointsModal.style.display = 'flex';
        }

        // Ouvrir le popup pour RETIRER des points
        function openRemovePointsModal(studentIds) {
            pointsTargetStudents = studentIds;
            
            if (studentIds.length === 1) {
                const student = students.find(s => s.id === studentIds[0]);
                removePointsModalText.textContent = `Retirer des points √† ${student.name} (#${student.id})`;
            } else {
                removePointsModalText.textContent = `Retirer des points √† ${studentIds.length} √©l√®ves s√©lectionn√©s`;
            }
            
            removePointsModal.style.display = 'flex';
        }

        // Appliquer des points aux √©l√®ves
        function applyPoints(points) {
            pointsTargetStudents.forEach(studentId => {
                const student = students.find(s => s.id === studentId);
                if (student) {
                    student.points += points;
                }
            });
            
            displayStudents();
            addPointsModal.style.display = 'none';
            removePointsModal.style.display = 'none';
        }

        // R√©initialiser tous les points √† z√©ro
        function resetAllPoints() {
            students.forEach(student => {
                student.points = 0;
            });
            
            displayStudents();
            resetModal.style.display = 'none';
            alert("Tous les points ont √©t√© r√©initialis√©s avec succ√®s !");
        }

        // Obtenir les IDs des √©l√®ves s√©lectionn√©s
        function getSelectedStudentIds() {
            return Array.from(document.querySelectorAll('.student-checkbox:checked'))
                .map(checkbox => parseInt(checkbox.id.split('-')[1]));
        }

        // Gestion des onglets
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                
                // D√©sactiver tous les onglets
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                
                // Activate the clicked tab
                this.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // √âv√©nements
        selectAllBtn.addEventListener('click', function() {
            document.querySelectorAll('.student-checkbox').forEach(checkbox => {
                checkbox.checked = true;
                checkbox.closest('.student-card').classList.add('selected');
            });
        });

        deselectAllBtn.addEventListener('click', function() {
            document.querySelectorAll('.student-checkbox').forEach(checkbox => {
                checkbox.checked = false;
                checkbox.closest('.student-card').classList.remove('selected');
            });
        });

        resetBtn.addEventListener('click', function() {
            resetModal.style.display = 'flex';
        });

        cancelReset.addEventListener('click', function() {
            resetModal.style.display = 'none';
        });

        confirmReset.addEventListener('click', resetAllPoints);

        changeAvatarBtn.addEventListener('click', function() {
            const selectedStudents = getSelectedStudentIds();
            
            if (selectedStudents.length !== 1) {
                alert("Veuillez s√©lectionner un seul √©l√®ve pour changer son avatar.");
                return;
            }
            
            selectedStudentId = selectedStudents[0];
            displayAvatarOptions();
            selectedAvatar = null;
            document.querySelectorAll('.avatar-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            avatarModal.style.display = 'flex';
        });

        cancelAvatar.addEventListener('click', function() {
            avatarModal.style.display = 'none';
            selectedStudentId = null;
            selectedAvatar = null;
        });

        confirmAvatar.addEventListener('click', function() {
            if (!selectedAvatar) {
                alert("Veuillez s√©lectionner un avatar.");
                return;
            }
            
            const student = students.find(s => s.id === selectedStudentId);
            if (student) {
                student.avatar = selectedAvatar;
                displayStudents();
                avatarModal.style.display = 'none';
                alert(`Avatar de ${student.name} modifi√© avec succ√®s !`);
            }
        });

        cancelAddPoints.addEventListener('click', function() {
            addPointsModal.style.display = 'none';
        });

        cancelRemovePoints.addEventListener('click', function() {
            removePointsModal.style.display = 'none';
        });

        // √âv√©nements pour les boutons de points (AJOUTER)
        document.querySelectorAll('#addPointsModal .point-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const points = parseInt(this.dataset.points);
                applyPoints(points);
            });
        });

        // √âv√©nements pour les boutons de points (RETIRER)
        document.querySelectorAll('#removePointsModal .point-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const points = parseInt(this.dataset.points);
                applyPoints(points);
            });
        });

        // √âv√©nement pour le bouton d'ajout d'√©l√®ve
        addStudentBtn.addEventListener('click', addStudent);

        // √âv√©nement pour ajouter un √©l√®ve avec la touche Entr√©e
        studentNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addStudent();
            }
        });

        // √âv√©nements pour les boutons d'actions group√©es
        addPointsBtn.addEventListener('click', function() {
            const selectedStudents = getSelectedStudentIds();
            
            if (selectedStudents.length === 0) {
                alert("Veuillez s√©lectionner au moins un √©l√®ve.");
                return;
            }
            
            openAddPointsModal(selectedStudents);
        });

        removePointsBtn.addEventListener('click', function() {
            const selectedStudents = getSelectedStudentIds();
            
            if (selectedStudents.length === 0) {
                alert("Veuillez s√©lectionner au moins un √©l√®ve.");
                return;
            }
            
            openRemovePointsModal(selectedStudents);
        });

        // Initialiser l'affichage
        displayStudents();
        displayStudentList();
    </script>
</body>
</html>
